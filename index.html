<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>검사 설명 항상 그랬다 - 제주한라병원</title>
    <style>
        /* 기본 설정 - 60대 이상 사용자를 위한 큰 글씨와 높은 대비 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
            font-size: 18px; /* 큰 기본 글씨 크기 */
            line-height: 1.6;
            background-color: #ffffff;
            color: #000000;
            min-height: 100vh;
        }

        /* 헤더 */
        .header {
            background-color: #2c5aa0;
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .hospital-logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .hospital-slogan {
            font-size: 16px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .main-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 20px;
            opacity: 0.9;
        }

        /* 메인 컨텐츠 */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* 검색 섹션 */
        .search-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .search-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c5aa0;
        }

        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .search-input {
            width: 100%;
            padding: 20px 60px 20px 20px;
            font-size: 20px;
            border: 3px solid #2c5aa0;
            border-radius: 10px;
            outline: none;
        }

        .search-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #2c5aa0;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
        }

        .clear-button {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* 검사 카테고리 */
        .category-section {
            margin-bottom: 40px;
        }

        .category-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c5aa0;
            text-align: center;
        }

        /* 검사 버튼 그리드 */
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 40px;
        }

        .test-button {
            background-color: #ffffff;
            border: 2px solid #2c5aa0;
            border-radius: 8px;
            padding: 20px;
            font-size: 18px;
            font-weight: bold;
            color: #2c5aa0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .test-button:hover {
            background-color: #2c5aa0;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(44, 90, 160, 0.3);
        }

        .test-button.hidden {
            display: none;
        }

        /* 검사 설명 모달 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .close-button {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 30px;
            font-weight: bold;
            color: #666;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: #f8f9fa;
        }

        .close-button:hover {
            background-color: #e9ecef;
            color: #000;
        }

        .test-title {
            font-size: 28px;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 25px;
            padding-right: 60px;
        }

        .test-section {
            margin-bottom: 25px;
            padding: 20px;
            border-left: 4px solid #2c5aa0;
            background-color: #f8f9fa;
            border-radius: 0 8px 8px 0;
        }

        .section-title {
            font-size: 22px;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 15px;
        }

        .section-content {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
        }

        /* 하단 푸터 */
        .footer {
            background-color: #2c5aa0;
            color: white;
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
        }

        .hospital-footer-info {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .contact-info {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .qr-info {
            font-size: 16px;
            opacity: 0.9;
        }

        /* 음성 안내 버튼 */
        .voice-button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            margin: 15px 0;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .voice-button:hover {
            background-color: #218838;
        }

        .voice-info {
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f4ff;
            border-radius: 8px;
            font-size: 16px;
            color: #2c5aa0;
        }

        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .main-title {
                font-size: 26px;
            }
            
            .search-input {
                font-size: 18px;
                padding: 18px 50px 18px 15px;
            }
            
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                margin: 2% auto;
                width: 95%;
                max-height: 90vh;
                padding: 20px;
            }
            
            .test-title {
                font-size: 24px;
                padding-right: 50px;
            }
        }

        /* 검색 결과 없음 메시지 */
        .no-results {
            text-align: center;
            font-size: 20px;
            color: #666;
            margin: 40px 0;
            display: none;
        }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <div class="hospital-logo">🏥 제주한라병원</div>
        <div class="hospital-slogan">도민에게 사랑받는</div>
        <h1 class="main-title">검사 설명 항상 그랬다</h1>
        <p class="subtitle">언제 어디서나, 믿을 수 있는 검사 정보</p>
    </header>

    <!-- 메인 컨텐츠 -->
    <div class="container">
        <!-- 검색 섹션 -->
        <section class="search-section">
            <h2 class="search-title">🔍 검사명을 검색하거나 아래 버튼을 클릭하세요</h2>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="검사명을 입력하세요 (예: 심전도, CT, MRI)" id="searchInput">
                <button class="search-button" id="searchButton">🔍</button>
            </div>
            <button class="clear-button" id="clearButton">전체 보기</button>
        </section>

        <!-- 검사 카테고리별 표시 -->
        <section class="category-section">
            <h2 class="category-title">📋 총 25개 검사 안내</h2>
            
            <!-- 검사 버튼들 -->
            <div class="test-grid" id="testGrid">
                <!-- 검사 버튼들이 JavaScript로 동적 생성됩니다 -->
            </div>

            <!-- 검색 결과 없음 메시지 -->
            <div class="no-results" id="noResults">
                <p>검색하신 검사를 찾을 수 없습니다.</p>
                <p>검사명을 다시 확인해 주세요.</p>
            </div>
        </section>
    </div>

    <!-- 검사 설명 모달 -->
    <div class="modal" id="testModal">
        <div class="modal-content">
            <span class="close-button" id="closeModal">&times;</span>
            <div id="modalContent">
                <!-- 검사 설명 내용이 여기에 표시됩니다 -->
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="hospital-footer-info">🏥 제주한라병원 | 도민에게 사랑받는</div>
        <div class="contact-info">📞 문의전화: 064-740-5000</div>
        <div class="qr-info">QR코드로 모바일에서도 편리하게 이용하세요</div>
    </footer>

    <script>
        // ==========================================
        // 검사 데이터 - 총 25개 (업로드 순서대로 정렬)
        // 병원 직원이 여기서 검사 정보를 수정할 수 있습니다
        // ==========================================
        const testData = {
            // 1. 골수검사
            "골수검사": {
                category: "기타검사",
                title: "골수검사 (Bone Marrow Aspiration & Biopsy)",
                sections: {
                    purpose: "골수검사는 혈액 질환의 정확한 진단과 치료 효과 평가, 그리고 추가 항암요법 결정을 위해 시행됩니다. 항암 치료 중 또는 치료 계획 수립 시 필수적으로 진행될 수 있습니다.",
                    method: "환자분은 옆으로 누운 자세로 검사에 임하게 됩니다. 주로 골반뼈(양쪽 또는 한쪽 후장골능 부위)를 깨끗이 소독한 후 국소 마취(리도카인)를 시행합니다. 이후 특수한 바늘을 이용해 골수 혈액과 조직을 소량 채취합니다.",
                    preparation: "• 검사 전 반드시 담당 의사로부터 충분한 설명을 듣고, 동의서를 작성해야 합니다\n• 금식은 필요하지 않으며, 검사 직전까지 일반 식사가 가능합니다",
                    precautions: "검사 중에는 눌리는 듯한 묵직한 느낌과 일시적인 통증이 있을 수 있으나 이는 정상적인 반응입니다. 일부 환자에게는 출혈, 감염, 통증, 드물게는 신경 손상 및 마비가 발생할 수 있습니다. 검사 후 검사 부위에 모래 주머니를 대고, 똑바로 누워 30분간 안정하여 지혈에 주의해주세요.",
                    duration: "약 30분",
                    location: "신관 2층 수술실"
                }
            },

            // 2. 심전도
            "심전도": {
                category: "심장검사",
                title: "심전도 (Electrocardiogram, EKG)",
                sections: {
                    purpose: "심전도 검사는 심근의 전기적 흥분 상태를 확인하여 심장질환, 부정맥 등 심장의 기능 이상 여부를 진단하는 중요한 검사입니다.",
                    method: "가슴 부위와 팔, 다리에 전극을 부착하여 심장의 전기적 신호를 기록하고 분석합니다. 인체에 무해한 방법으로 진행되며, 통증이 거의 없습니다.",
                    preparation: "• 특별한 금식이나 사전 준비는 필요하지 않습니다\n• 검사 전 몸에 금속 액세서리나 전자기기 부착물은 제거해 주세요",
                    precautions: "일부 환자에게는 전극 패치 부착 부위의 젤이나 접착제 성분으로 인해 피부 알레르기 반응이 나타날 수 있습니다. 불편함이 있을 경우 즉시 검사실 직원에게 알려주세요.",
                    duration: "약 3~5분",
                    location: "3층 심장검사실"
                }
            },

            // 3. 24시간 심전도 검사
            "24시간심전도": {
                category: "심장검사",
                title: "24시간 심전도 검사 (Holter Monitoring)",
                sections: {
                    purpose: "흉통, 실신, 심계항진 등의 증상을 가진 환자분의 심장 박동 상태를 24시간 연속 기록하여 증상과 부정맥 발생 간의 연관성을 진단하기 위해 시행합니다.",
                    method: "소형 심전도 기계를 몸에 부착하여 24시간 동안 심장의 전기적 신호를 자동으로 기록합니다. 검사 기간 동안 일상생활은 가능하지만, 주의사항을 꼭 지켜주세요.",
                    preparation: "• 검사 중에는 전기기구, 전기면도기 사용, 목욕 및 샤워는 삼가주세요\n• 전기장판, 자석 제품 등은 몸에 지니지 않도록 주의합니다\n• 몸에 부착된 기계의 전극을 만지거나 임의로 떼지 마세요",
                    precautions: "일부 환자분께서는 젤리나 전극 패치 접착제로 인한 피부 알레르기 반응이 발생할 수 있습니다. 이상 증상이 있을 경우 즉시 검사 담당 간호사에게 알려주세요.",
                    duration: "24시간 연속 기록",
                    location: "1층 심장검사실"
                }
            },

            // 4. 심장초음파
            "심장초음파": {
                category: "심장검사",
                title: "심장초음파 (Echocardiography, ECHO)",
                sections: {
                    purpose: "초음파를 이용하여 심장의 크기, 모양, 움직임, 구조 등을 영상으로 확인하는 검사입니다. 심박출률(EF), 심장 판막 기능, 심방·심실 비대 여부, 심벽의 움직임 등을 평가할 수 있습니다.",
                    method: "검사실에서 상의의 앞 단추를 풀고 좌측 또는 우측으로 옆으로 누워서 검사합니다. 가슴 부위에 초음파용 젤리를 바른 탐촉자를 피부에 밀착시켜 문지르며 검사를 진행합니다. 통증이 없고, 안전한 영상검사입니다.",
                    preparation: "• 특별한 준비는 필요하지 않으며, 편안한 복장을 권장합니다\n• 검사 전 심한 운동이나 식사 제한은 없습니다",
                    precautions: "드물게 젤리 성분으로 인한 피부 알레르기 반응이 나타날 수 있습니다. 불편함이 있을 경우 검사 담당 간호사에게 즉시 알려주세요.",
                    duration: "약 30분",
                    location: "1층 심장검사실"
                }
            },

            // 5. 운동부하검사
            "운동부하검사": {
                category: "심장검사",
                title: "운동 부하검사 (Treadmill Test, TMT)",
                sections: {
                    purpose: "운동 중 심장과 혈관의 반응을 모니터링하여 심장 상태를 평가하는 검사입니다. 관상동맥 질환이 있는 경우, 운동으로 심근의 산소 요구량이 증가할 때 흉통이 발생하는지 여부를 확인할 수 있습니다.",
                    method: "러닝머신과 같은 기계 위에서 걷거나 달리면서 검사를 진행합니다. 3분마다 속도와 경사를 높여 목표 심박수(220 - 나이)까지 도달하도록 유도하며, 심전도 변화를 모니터링합니다.",
                    preparation: "• 검사 전 2~4시간은 금식(물은 허용), 카페인 음료와 흡연은 금지해 주세요\n• 검사 후 당일은 무리한 운동이나 무거운 작업은 피해야 합니다\n• 검사 중 흉통, 호흡곤란, 극심한 피로가 있을 경우 즉시 의료진에게 알려주세요",
                    precautions: "드물게 부정맥(불규칙한 맥박), 혈압 변동, 현기증 등이 발생할 수 있습니다. 검사실 의료진이 즉시 대처할 수 있도록 준비되어 있으니 안심하세요.",
                    duration: "약 1시간 ~ 1시간 30분",
                    location: "1층 심장검사실"
                }
            },

            // 6. 24시간 활동혈압측정기
            "24시간활동혈압": {
                category: "심장검사",
                title: "24시간 활동혈압측정기 (ABPM)",
                sections: {
                    purpose: "일상생활 중의 혈압 변화를 연속적으로 기록하고 분석하여 혈압약 효과 판정, 집과 병원 혈압 차이 파악, 수면 중 혈압 상승 여부 확인 등을 위해 시행하는 검사입니다.",
                    method: "혈압 측정 장비를 팔에 부착하여 하루 종일 착용합니다. 15~30분 간격으로 자동으로 혈압을 측정하며, 이를 통해 24시간 평균 혈압과 혈압 패턴을 확인합니다.",
                    preparation: "• 검사 중에는 장비에 물이 닿지 않도록 주의하며, 샤워는 할 수 없습니다\n• 혈압계가 팔에 부착되므로 여유 있는 셔츠나 상의를 착용하고 내원해 주세요\n• 기계 부착 중에는 X-ray, MRI 등 다른 검사는 진행할 수 없습니다",
                    precautions: "현재까지 알려진 특별한 부작용은 없으나, 압박으로 인한 팔의 불편함이나 약간의 통증이 있을 수 있습니다. 불편한 점이 있으면 즉시 검사 담당자에게 알려주세요.",
                    duration: "24시간 연속 측정",
                    location: "1층 심장검사실"
                }
            },

            // 7. 심장혈관조영술
            "심장혈관조영술": {
                category: "혈관조영검사",
                title: "심장혈관조영술 (Coronary Angiography, CAG)",
                sections: {
                    purpose: "관상동맥을 직접 눈으로 확인할 수 있는 검사로, 심장판막 상태 평가, 혈역학 및 심박출량 확인, 선천성 심장질환 진단 등 심장 구조와 기능을 종합적으로 파악할 수 있는 중요한 검사입니다.",
                    method: "대퇴동맥(허벅지) 또는 요골동맥(손목)을 통해 관상동맥까지 카테터를 삽입한 뒤 조영제를 주입하고 X-ray로 혈관 영상을 촬영합니다. 검사 중 필요에 따라 중재시술(풍선확장술, 스텐트 삽입 등)이 함께 진행될 수 있습니다.",
                    preparation: "• 조영제 알레르기 유무를 사전에 확인합니다\n• 항응고제는 검사 24~72시간 전 중단, 메트포르민 제제는 검사 24~48시간 전후 중단합니다\n• 혈액검사, 18G IV 확보, 천자 부위 제모, 시술 전 맥박 확인이 필요합니다\n• 반드시 보호자 확인 및 동의서 작성, 금식을 해주세요",
                    precautions: "출혈 위험이 크고, 조영제 알레르기 반응이 발생할 수 있습니다. 시술 중 혈전 생성으로 인해 뇌졸중 등의 합병증이 발생할 수 있으므로 의료진의 지시에 꼭 따라주세요. 시술 후에는 천자 부위, 맥박, 혈종·부종·출혈 여부를 주의깊게 관찰해야 합니다.",
                    duration: "약 1시간",
                    location: "2층 혈관촬영실"
                }
            },

            // 8. CT
            "CT": {
                category: "영상검사",
                title: "CT (전산화단층촬영)",
                sections: {
                    purpose: "CT 검사는 X선을 인체에 투과시켜 흡수 차이를 컴퓨터로 재구성하여 인체의 단면 혹은 3차원 영상을 획득하는 영상 진단법입니다. 병변 부위를 선명하게 확인할 수 있어 종양, 출혈 등의 진단에 매우 유용합니다.",
                    method: "회전하는 X선과 검출기를 사용해 인체 내부를 단면으로 촬영합니다. 신체 조직을 통과하는 방사선의 흡수율을 분석하여 영상을 만들어, 비침습적으로 질환을 진단하고 병변을 식별할 수 있습니다.",
                    preparation: "• 조영제 사용 시 검사 전 최소 6시간 금식 필요\n• 복부 CT도 동일하게 금식 필요\n• 메트포르민 복용 환자는 조영제 주입 전후 24~48시간 동안 복용 중단\n• 소아의 경우 필요 시 보호자 동의하에 진정제 투여 가능",
                    precautions: "조영제 주입 시 약간의 온열감, 가벼운 구토, 두드러기, 가려움, 기침, 콧물, 일시적인 호흡곤란 등 경미한 증상이 있을 수 있습니다. 매우 드물게 과민성 쇼크로 심각한 상황이 발생할 수 있으므로, 이상 증상이 느껴지면 즉시 의료진에게 알려주세요.",
                    duration: "약 20분",
                    location: "지하 1층 CT실, 본관 1층 CT실"
                }
            },

            // 9. 폐기능검사
            "폐기능검사": {
                category: "기능검사",
                title: "PFT (폐기능검사)",
                sections: {
                    purpose: "폐기능검사는 폐 기능에 이상이 있는지 여부를 확인하고, 질환의 진행 정도와 폐의 생리적 장애 특성을 평가하기 위해 시행됩니다.",
                    method: "환자분은 앉거나 누운 상태에서 검사자의 지시에 따라 숨을 깊게 들이쉬고 빠르게 내쉬며, 숨을 참는 등의 호흡을 반복하면서 폐의 기능을 측정합니다. 검사 중에는 검사자가 호흡 방법을 단계별로 안내하므로 편안한 마음으로 따라주세요.",
                    preparation: "급성 관상동맥 허혈증 또는 최근 심근경색이 있었던 분은 검사를 시행할 수 없습니다.",
                    precautions: "검사 중 흉통이나 호흡곤란이 나타날 수 있으므로 이런 증상이 발생하면 즉시 검사자에게 알려주세요. 검사 중 기침이나 기관지 경련이 나타날 수 있으니 담당자가 주의깊게 관찰합니다.",
                    duration: "약 30분",
                    location: "본관 3층 호흡기내과 맞은편"
                }
            },

            // 10. 골밀도검사
            "골밀도검사": {
                category: "핵의학검사",
                title: "골밀도 검사 (BMD)",
                sections: {
                    purpose: "골밀도 측정으로 뼈의 강도를 평가하여 골다공증을 진단하고, 골 질환의 병적 상태와 관련 합병증을 조기에 확인하기 위해 시행하는 핵의학 검사입니다.",
                    method: "환자분은 검사 테이블에 누운 상태로 천장을 바라보고 안정된 자세를 유지합니다. 촬영 장비가 천천히 이동하며 요추와 대퇴골 부위를 중심으로 검사를 진행합니다.",
                    preparation: "• 정확한 진단을 위해 환자의 키와 몸무게가 중요하므로, 측정된 신체 정보를 사전에 정확히 전달해 주세요\n• 금식이나 특별한 사전 준비는 필요하지 않습니다\n• 검사 도중 움직임이 없도록 협조 부탁드립니다",
                    precautions: "특별한 부작용은 보고되지 않았으나, 검사 중 불편함이 있으면 즉시 검사 담당자에게 알려주세요.",
                    duration: "약 10분",
                    location: "신관 1층 골밀도 촬영실"
                }
            },

            // 11. MRI
            "MRI": {
                category: "영상검사",
                title: "MRI (자기공명영상)",
                sections: {
                    purpose: "MRI는 종양 질환, 연골 및 연부조직 질환 등 다양한 질환을 고해상도 영상으로 진단하는 검사입니다. 대표적으로 뇌종양, 허혈성 뇌경색, 뇌출혈, 자궁경부암, 전립선암 등의 정확한 진단에 활용됩니다.",
                    method: "50~60cm 크기의 자석 장치에 눕혀 고주파를 발생시켜 원자핵 반응으로 신호를 얻어 컴퓨터로 영상화합니다. 방사선을 사용하지 않아 안전하며, 조직 해상도가 매우 높고, 환자 체위를 바꾸지 않아도 다양한 방향의 영상 획득이 가능합니다.",
                    preparation: "• 폐쇄공포증 환자 또는 심장 박동기, 체내 금속(철, 쇠, 카드 등)이 있는 경우 검사 불가합니다\n• 복부·골반 MRI는 6시간 전부터 금식이 필요합니다\n• 촬영 중 검사자의 지시(숨 들이마시기, 내쉬기, 숨 참기)를 잘 따라야 하며, 협조가 안 되면 촬영이 어려울 수 있습니다\n• 불안하거나 폐쇄공포증이 심한 경우 진정치료(미다졸람 투여)를 시행할 수 있습니다",
                    precautions: "검사 중 자기공명영상기에서 나는 큰 소리로 인해 귀마개 착용이 필요합니다. 가돌리늄(Gadolinium)계 조영제는 요오드계 조영제보다 신독성이 낮아 비교적 안전합니다.",
                    duration: "검사 부위와 종류에 따라 다름",
                    location: "신관, 본관 각 지하 1층 자기공명영상실"
                }
            },

            // 12. 뼈스캔
            "뼈스캔": {
                category: "핵의학검사",
                title: "핵의학과 검사 (Bone Scan)",
                sections: {
                    purpose: "방사성 의약품과 특수 영상 장치를 이용해 신체 기관을 영상화하여 정상 조직과 비정상 조직의 차이를 진단합니다. 특히 골에 친화력이 강한 방사성 동위원소를 정맥으로 주입해 뼈에 침착되는 정도를 촬영하여 뼈 질환을 평가합니다.",
                    method: "방사성 동위원소를 정맥 내에 주사한 뒤, 약 4시간 후 침착 정도를 촬영합니다. (예: 오전 주사 → 오후 촬영) 촬영은 안전하고 통증이 없습니다.",
                    preparation: "• 모든 검사는 예약 필수이며, 취소 시 최소 24시간 전에 연락해 주세요\n• 임신부와 수유부는 검사 불가합니다\n• 촬영 전에 배뇨하여 골반 영상에 방해가 되지 않도록 합니다",
                    precautions: "드물게 조영제 부작용이 있을 수 있으므로 이상 증상이 있을 경우 즉시 의료진에게 알려주세요. 검사 후 방사성 동위원소가 빠르게 배출되도록 충분한 수분 섭취를 권장합니다.",
                    duration: "주사 후 약 4시간 대기 후, 촬영은 약 30분 소요",
                    location: "본관 지하 1층 핵의학과"
                }
            },

            // 13. 연하검사
            "연하검사": {
                category: "기타검사",
                title: "연하검사 (VFSS)",
                sections: {
                    purpose: "삼킴 곤란(연하 장애)의 원인을 진단하고, 현재 적합한 식사 형태, 섭취 시 증상, 영양 상태, 폐렴 여부 등을 파악하기 위해 시행하는 검사입니다.",
                    method: "환자가 음식을 삼키는 동안 투시촬영(전후면, 시상면)으로 삼킴 과정을 영상화합니다. 검사에 필요한 요플레, 밥, 으깬 감자, 일회용 수저 등은 영양팀에서 준비합니다.",
                    preparation: "• 환자는 반드시 의식이 명료하고 정상적인 시간 내 연하 반사가 가능해야 하며, 영양 상태가 적절해야 합니다\n• 음식물을 입에 받아들이고 자발적으로 입을 벌릴 수 있어야 합니다\n• 검사는 반드시 앉은 자세에서만 가능하므로, 최소한 휠체어 착석이 가능해야 하며 누워서는 검사할 수 없습니다",
                    precautions: "연하 기능이 크게 저하된 환자는 검사 중 음식물이 기도나 폐로 흡인되어 폐렴이나 질식과 같은 중대한 상황이 발생할 수 있습니다. 만일 이러한 상황이 발생할 경우, 의료진이 즉각적으로 적절한 처치를 시행하며, 검사 후에도 주의깊게 관찰합니다. 검사 후에는 가슴 X-ray 촬영을 통해 흡인 여부 등을 추가로 확인합니다.",
                    duration: "약 20분",
                    location: "1층 영상의학과"
                }
            },

            // 14. 근전도검사
            "근전도검사": {
                category: "기능검사",
                title: "EMG/NCV (근전도검사 / 신경전도검사)",
                sections: {
                    purpose: "근전도검사(EMG)와 신경전도검사(NCV)는 근육병증, 신경병증, 중증 근무력증 등 다양한 신경·근육 질환의 원인을 진단하기 위해 시행됩니다.",
                    method: "환자분은 편안히 누운 상태에서 몸에 힘을 빼고 검사에 임합니다. 검사자는 가는 바늘 전극이나 전기 자극을 이용하여 근육과 말초 신경의 전기적 활동성을 측정합니다. 검사 중 근육의 반응을 관찰하며 필요한 경우 여러 부위를 순차적으로 측정할 수 있습니다.",
                    preparation: "검사 시 전극을 주입할 때 약간의 통증이 있을 수 있음을 사전에 안내드립니다.",
                    precautions: "일부 환자분은 젤리(접촉 매개제)로 인해 피부 알레르기 반응이 나타날 수 있습니다. 이상 증상이 있으면 즉시 검사 담당자에게 알려주세요. 검사 후 일시적으로 주사 부위의 통증이나 멍이 생길 수 있으나 대부분 자연적으로 회복됩니다.",
                    duration: "약 10~20분",
                    location: "지하 1층 근전도실"
                }
            },

            // 15. 뇌파검사
            "뇌파검사": {
                category: "기능검사",
                title: "EEG (뇌파검사)",
                sections: {
                    purpose: "뇌파검사는 뇌 기능 활동의 이상 유무를 판단하기 위한 검사로, 간질, 뇌종양 진단, 그리고 기능성 정신질환 감별 진단에 유용합니다.",
                    method: "환자분의 머리에 전극을 부착한 뒤 뇌파 기계를 통해 뇌의 전기적 활동을 증폭·기록합니다. 검사 도중 눈을 감고 안정된 상태를 유지하거나 검사자의 지시에 따라 간단한 동작을 수행할 수 있습니다.",
                    preparation: "• 수면 뇌파 검사 시에는 검사 전날 밤 최대한 재우지 않고 오셔야 합니다\n• 소아의 경우 필요 시 진정제를 투여하여 진행할 수 있습니다\n• 카페인이 함유된 음료나 음식은 피해주세요\n• 검사 당일 머리에 기름, 무스 등을 바르지 않도록 합니다",
                    precautions: "현재까지 알려진 특별한 부작용은 없으나, 검사 중 불편하거나 이상 증상이 있으면 즉시 검사 담당자에게 알려주세요. 검사 후에는 의식이 완전히 회복되었는지 주의깊게 관찰해야 하며, 검사 후 머리에 묻은 젤리는 샴푸로 깨끗이 제거해 주세요.",
                    duration: "약 30분",
                    location: "지하 1층 뇌파검사실"
                }
            },

            // 16. 복부초음파
            "복부초음파": {
                category: "초음파검사",
                title: "복부 초음파",
                sections: {
                    purpose: "복부 초음파는 음파를 이용한 비침습적 검사로, 신체 장기 및 조직의 모양과 위치를 확인하고 종괴, 부종, 결석 등의 이상 여부를 평가할 수 있습니다. 상복부(간, 신장, 췌장, 담관, 담낭)와 하복부(신장, 부신, 방광, 자궁, 난소, 전립선 등)의 상태를 안전하게 진단할 수 있습니다.",
                    method: "초음파 탐촉자를 검사 부위 피부에 밀착시켜 음파를 보낸 뒤, 되돌아오는 신호를 실시간으로 영상화하여 내부 장기를 확인합니다. 검사 중에는 검사자가 자세를 바꾸도록 요청할 수 있으니 안내에 따라 주시기 바랍니다.",
                    preparation: "• 상복부 초음파: 검사 전 최소 6~8시간 금식이 필요합니다\n• 하복부 초음파: 검사 2~3시간 전부터 소변을 참도록 준비해 주세요\n• 금식을 하지 않을 경우 담낭 수축이나 장내 가스로 인해 검사 정확도가 떨어질 수 있습니다",
                    precautions: "현재까지 알려진 특별한 부작용은 없으나, 검사 중 불편함이 있으면 검사자에게 알려주세요.",
                    duration: "약 5~10분",
                    location: "신관 1층 초음파검사실"
                }
            },

            // 17. 식도경유심장초음파검사
            "식도경유심장초음파": {
                category: "심장검사",
                title: "식도경유심장초음파검사 (TEE)",
                sections: {
                    purpose: "TEE는 심근에 부하를 가하여 심근 허혈을 유발한 상황에서 심근 벽 운동을 관찰함으로써 심장 기능 이상 여부를 정밀하게 평가하는 검사입니다.",
                    method: "마시는 마취약과 스프레이를 이용해 국소적으로 구강을 2회 마취합니다. 침대에 좌측으로 누워 손가락 굵기 정도의 초음파 튜브를 입을 통해 식도까지 삽입하여 심장 내부를 초음파로 촬영합니다. 검사 도중 의료진이 심장 상태를 실시간으로 확인합니다.",
                    preparation: "• 검사 전날 자정부터 금식하며, 물도 마시면 안 됩니다\n• 검사 당일 목 마취 시간이 필요하므로 예약 시간보다 10~15분 일찍 도착해 주세요\n• 의치를 착용하신 경우 검사 전에 반드시 제거해야 하며, 흔들리는 치아가 있다면 사전에 의료진에게 알려주세요\n• 혈압약이 있다면 검사 당일 이른 아침에 물 소량과 함께 복용해 주세요",
                    precautions: "현재까지 보고된 특별한 부작용은 없으나, 검사 도중 불편함이나 이상 증상이 있으면 즉시 의료진에게 알려주세요. 검사 후에는 마취가 완전히 풀린 뒤에만 음식이나 음료를 섭취해야 합니다. 검사 중과 후에는 산소 포화도 관찰이 필요합니다.",
                    duration: "약 1시간 ~ 1시간 30분",
                    location: "1층 심장 검사실"
                }
            },

            // 18. 간섬유화검사
            "간섬유화검사": {
                category: "기타검사",
                title: "간섬유화검사 (Liver Fibroscan)",
                sections: {
                    purpose: "간섬유화검사는 비침습적인 방식으로 간의 탄력성을 측정하여 간섬유화의 유무 및 진행 정도를 신속하고 안전하게 진단합니다. 간 섬유화가 진행될수록 수치(kPa)가 높게 측정됩니다.",
                    method: "오른쪽 상의를 가슴까지 올리고 침대에 누운 상태에서 오른쪽 팔꿈치를 머리 아래에 올린 후 왼팔은 편안하게 몸 옆에 둡니다. 검사자는 간 부위 갈비뼈 사이에 탐촉자를 대고 진동을 주어 간의 탄력성을 측정합니다. 검사 중에는 호흡을 고르게 하고 검사자의 지시에 따라 움직여 주세요.",
                    preparation: "4시간 금식, 입원환자인 경우 아침먹고 금식 후 진행. 검사자 안내에 잘 따라주세요.",
                    precautions: "통증과 검사 후 부작용이 전혀 없습니다. 안전하고 편안한 검사입니다.",
                    duration: "약 5~10분",
                    location: "신관 3층 내시경실"
                }
            },

            // 19. VCUG
            "VCUG": {
                category: "영상검사",
                title: "VCUG (배뇨방광 요도조영검사)",
                sections: {
                    purpose: "VCUG는 요로 감염으로 인한 방광 소변의 신장 역류 여부를 확인하기 위한 검사입니다. 요도구를 통해 조영제를 방광에 주입한 후 배뇨하면서 방광과 요도의 이상 유무를 확인합니다.",
                    method: "연속적인 X-ray 촬영과 방사선 비투과성 조영제를 주입하여 영상 대조도를 높여 진행됩니다. 방광에 조영제를 채우기 위해 소변줄(도뇨관)을 삽입하며, 성인은 뇨의가 느껴질 때까지 주입 후 배뇨, 유아는 소변줄을 유지한 상태로 배뇨합니다. 배뇨 시 방광요관 역류 여부를 촬영으로 확인합니다.",
                    preparation: "IVP(정맥신우조영술)와 병행할 경우, 반드시 VCUG를 먼저 시행합니다.",
                    precautions: "현재까지 보고된 특별한 부작용은 없으나, 검사 중 통증이나 불편함이 있으면 즉시 말씀해주세요. 검사 전후 불편함이 있을 경우 즉시 검사자에게 알려주세요.",
                    duration: "약 20분",
                    location: "신관 1층 영상의학과"
                }
            },

            // 20. PET-CT
            "PET-CT": {
                category: "핵의학검사",
                title: "PET-CT (양전자방출단층촬영)",
                sections: {
                    purpose: "PET-CT는 인체 내 장기의 기능, 생화학적 및 생리적 반응을 정량화할 수 있는 특수한 검사법으로, 질병의 진단, 치료 효과 평가, 예후 예측, 치료 방침 결정에 중요한 도움을 줍니다.",
                    method: "먼저 혈당을 측정하며, 혈당이 150 이상이면 검사가 불가할 수 있습니다. 방사성 의약품을 정맥 주사한 후, 약 1시간 동안 안정실에서 전신에 약물이 고르게 흡수되도록 안정합니다. 검사 직전 방광을 비우기 위해 소변을 본 후 PET-CT 검사실로 이동하여 전신 또는 머리 부위를 촬영합니다.",
                    preparation: "• 검사 전 6시간 금식: 저녁 식사 이후부터 금식하며, 물(생수)은 허용됩니다\n• 포도당이 포함된 수액제는 금지합니다\n• 금식 중 물은 충분히 섭취해 주세요\n• 검사 전날에는 탕 목욕, 사우나, 찜질방, 격한 운동 등 땀이 나는 활동은 피하고 가벼운 샤워만 허용됩니다\n• 임신 중, 임신 가능성, 수유 중인 경우 반드시 사전에 의료진에게 알리기 바랍니다",
                    precautions: "현재까지 특별한 부작용은 보고되지 않았지만, 불편함이 있을 경우 즉시 의료진에게 알려주세요.",
                    duration: "약 1시간 30분 ~ 2시간",
                    location: "본관 지하 1층 암센터 내 PET-CT실"
                }
            },

            // 21. 뇌혈관조영술
            "뇌혈관조영술": {
                category: "혈관조영검사",
                title: "뇌혈관조영술 (TFCA)",
                sections: {
                    purpose: "TFCA는 방사선을 이용해 뇌혈관, 경동맥, 척추동맥 등을 정밀하게 촬영하는 혈관조영술입니다. 뇌동맥류, 뇌동정맥기형 등 뇌혈관 질환의 확진과 치료 계획 수립, 뇌종양 치료 계획에 필수적인 검사입니다. 현재로서는 뇌혈관 진단에 가장 정확한 검사법입니다.",
                    method: "환자의 대퇴동맥을 통해 지름 2mm 내외의 카테터를 삽입, 조영제를 주입하여 뇌혈관 영상을 촬영합니다. 연속 X선 촬영 장치로 전·후·측면 영상을 획득하여 완전한 뇌혈액 순환 상태를 확인합니다. 시술 부위는 드레싱 후 반창고로 고정하고, 모래주머니(Sand Bag)로 압박하여 지혈을 돕습니다.",
                    preparation: "• 검사 6시간 전부터 금식해 주세요\n• 검사 전에 하지의 발등 맥박(DPP)을 확인하고 맥박 위치를 표시해 놓습니다\n• Sand Bag은 4~6시간 후 제거하며, 그 동안 절대 안정(ABR)을 유지합니다\n• 천자한 쪽 다리는 절대 구부리지 말고, 식사와 용변도 누운 상태로 해결해야 합니다",
                    precautions: "혈전증, 색전증, 혈관 경련, 출혈 등으로 인한 뇌관류 변화가 드물게 발생할 수 있습니다. 조영제에 의한 알레르기 반응이 나타날 수 있으니 이상 징후가 있으면 즉시 의료진에게 알려주세요. 시술 부위에 압통, 부종, 출혈 등이 있으면 즉시 간호사에게 알리세요.",
                    duration: "약 30분 ~ 1시간",
                    location: "본관 2층 혈관촬영실"
                }
            },

            // 22. 뇌 단일광자단층촬영
            "뇌SPECT": {
                category: "핵의학검사",
                title: "뇌 단일광자단층촬영 (Brain SPECT)",
                sections: {
                    purpose: "Brain SPECT는 국소 뇌혈류 및 신경 수용체 영상 촬영으로 뇌혈관 질환, 뇌혈류 예비능 평가, 간질 병소 확인 등에 사용됩니다. 뇌혈관 질환, 간질, 정신질환, 알츠하이머병, 치매, 운동성 장애, 뇌종양 등의 병태생리학적·기능적 기전을 파악하기 위한 검사입니다.",
                    method: "방사성 의약품(99mTc-ECD, HMPAO 20mCi)을 정맥 주사한 뒤 30분 후 검사를 시작합니다. 주사된 방사성 의약품은 뇌의 관류 상태, 대사 상태 등을 반영하여 3차원 영상으로 확인할 수 있습니다.",
                    preparation: "• 방사성 의약품 주사 후, 뇌 분포가 결정될 때까지 최소 5~20분은 안정 상태로 유지해야 합니다\n• 뇌혈관 확장 약물을 투여한 경우 이뇨 작용이 나타날 수 있으므로 검사 전 소변을 보고 오세요",
                    precautions: "현재까지 특별한 부작용은 보고되지 않았습니다.",
                    duration: "약 20분",
                    location: "본관 지하 1층 핵의학과"
                }
            },

            // 23. 상부 위장관 내시경
            "위내시경": {
                category: "내시경검사",
                title: "상부 위장관 내시경 (EGD)",
                sections: {
                    purpose: "EGD는 상부 위장관의 조기 암 발견 및 소화기 증상의 원인을 평가하기 위한 검사입니다. 위염, 궤양, 암, 출혈 여부를 관찰하며 필요 시 조직 검사, 용종 제거, 출혈 지혈 등을 시행할 수 있습니다.",
                    method: "구강을 통해 내시경을 삽입하여 식도, 위, 십이지장을 직접 관찰합니다.",
                    preparation: "• 6~8시간 금식\n• 내시경 동의서, 수면 내시경 시 진정 동의서 작성\n• IV line 확보 (오른팔 가능)\n• 병력 및 약물 복용력 확인: 항응고제, 항혈전제는 10일 전 복용 중단 필요할 수 있음\n• 당뇨약/인슐린은 검사 후 금식 해제 시 복용, 고혈압약은 검사 당일 아침 물 소량과 함께 복용\n• 틀니, 의치, 안경은 제거",
                    precautions: "출혈 가능성이 있으며, 드물게 내시경 삽입 시 호흡곤란, 청색증 발생이 가능합니다. 연하 반사 회복 전 최소 30분 금식을 유지해야 하며, 조직 검사, 지혈술 후에는 금식을 유지하고 주치의 지시에 따릅니다.",
                    duration: "약 10~20분",
                    location: "3층 내시경실"
                }
            },

            // 24. 하부 위장관 내시경 (대장내시경)
            "대장내시경": {
                category: "내시경검사",
                title: "하부 위장관 내시경 (Colonoscopy)",
                sections: {
                    purpose: "대장암 선별검사, 용종 치료 및 추적, 대장·직장 출혈, 변비, 설사, 복통 등의 원인 확인을 위해 시행합니다.",
                    method: "항문을 통해 내시경을 삽입하여 항문부터 회장 말단까지 대장 내부를 관찰하고 필요 시 조직 검사 및 용종 제거를 시행합니다.",
                    preparation: "• 철저한 장 준비가 필수. 불완전할 경우 병변 관찰이 어려움\n• 엄격한 식이 제한과 장 정결제 복용 필요\n• 검사 3일 전: 섬유질 많은 음식, 씨 있는 과일 제한\n• 검사 전날: 자극적 음식 피하고 흰 쌀밥, 계란, 카스테라 등 부드러운 음식 섭취\n• 검사 1일 전: 아침·점심은 흰죽/미음, 저녁부터 금식",
                    precautions: "장 정결제 복용 시 배변 상태 주의깊게 관찰해야 합니다. 대변이 안 나오고 복부 팽만·심한 복통 시 즉시 투약 중단 후 의료진에 알림이 필요합니다. 배변은 찌꺼기 없이 맑은 노란색으로 나와야 합니다.",
                    duration: "약 30분",
                    location: "신관 3층 내시경검사실"
                }
            },

            // 25. 하부 위장관 내시경 (S상결장내시경)
            "S상결장내시경": {
                category: "내시경검사",
                title: "하부 위장관 내시경 (Sigmoidoscopy)",
                sections: {
                    purpose: "항문, 직장, S상 결장을 직접 관찰하여 종양, 용종, 궤양 등을 진단합니다. 대장 전체가 아닌 항문으로부터 45~60cm 범위를 검사하며, 대장암이 가장 많이 발생하는 부위 확인에 중요합니다.",
                    method: "대장 내시경과 유사하나 장 정결제가 필요하지 않고, 필요 시 NS(Normal Saline)로 청결 관장을 시행할 수 있습니다. NS 1L를 항문을 통해 주입해 변이 맑게 나올 때까지 3회 이상 시행합니다.",
                    preparation: "개별 환자 상태에 따라 청결 관장 시행 여부를 결정합니다.",
                    precautions: "현재까지 특별한 부작용은 보고되지 않았습니다.",
                    duration: "약 30분",
                    location: "신관 3층 내시경 검사실"
                }
            }
        };

        // ==========================================
        // 웹사이트 기능 구현부
        // ==========================================

        // DOM 요소들
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const clearButton = document.getElementById('clearButton');
        const testGrid = document.getElementById('testGrid');
        const testModal = document.getElementById('testModal');
        const closeModal = document.getElementById('closeModal');
        const modalContent = document.getElementById('modalContent');
        const noResults = document.getElementById('noResults');

        // 페이지 로드 시 모든 검사 버튼 생성 (업로드 순서대로)
        function generateTestButtons() {
            testGrid.innerHTML = '';
            
            // 검사 순서를 업로드 순서대로 정렬
            const testOrder = [
                '골수검사', '심전도', '24시간심전도', '심장초음파', '운동부하검사', 
                '24시간활동혈압', '심장혈관조영술', 'CT', '폐기능검사', '골밀도검사',
                'MRI', '뼈스캔', '연하검사', '근전도검사', '뇌파검사',
                '복부초음파', '식도경유심장초음파', '간섬유화검사', 'VCUG', 'PET-CT',
                '뇌혈관조영술', '뇌SPECT', '위내시경', '대장내시경', 'S상결장내시경'
            ];
            
            testOrder.forEach(testKey => {
                if (testData[testKey]) {
                    const test = testData[testKey];
                    const button = document.createElement('button');
                    button.className = 'test-button';
                    button.textContent = test.title;
                    button.setAttribute('data-test', testKey);
                    button.onclick = () => showTestDetail(testKey);
                    testGrid.appendChild(button);
                }
            });
        }

        // 검사 상세 정보 모달 표시
        function showTestDetail(testKey) {
            const test = testData[testKey];
            
            modalContent.innerHTML = `
                <h2 class="test-title">${test.title}</h2>
                
                <div class="test-section">
                    <h3 class="section-title">🎯 검사 목적</h3>
                    <div class="section-content">${formatContent(test.sections.purpose)}</div>
                </div>

                <div class="test-section">
                    <h3 class="section-title">🔬 검사 방법</h3>
                    <div class="section-content">${formatContent(test.sections.method)}</div>
                </div>

                <div class="test-section">
                    <h3 class="section-title">📋 검사 전 준비사항</h3>
                    <div class="section-content">${formatContent(test.sections.preparation)}</div>
                </div>

                <div class="test-section">
                    <h3 class="section-title">⚠️ 주의사항 및 부작용</h3>
                    <div class="section-content">${formatContent(test.sections.precautions)}</div>
                </div>

                <div class="test-section">
                    <h3 class="section-title">⏰ 소요시간</h3>
                    <div class="section-content">${test.sections.duration}</div>
                </div>

                <div class="test-section">
                    <h3 class="section-title">📍 검사 장소</h3>
                    <div class="section-content">${test.sections.location}</div>
                </div>

                <button class="voice-button" onclick="readAloud('${testKey}')">
                    🔊 음성으로 듣기
                </button>
                
                <div class="voice-info">
                    <strong>💡 음성 기능 사용 안내:</strong><br>
                    • Chrome, Safari, Edge 브라우저에서 지원됩니다<br>
                    • 모바일에서는 볼륨을 켜주세요<br>
                    • 음성이 나오지 않으면 브라우저를 새로고침 해주세요
                </div>
            `;
            
            testModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        // 텍스트 포맷팅 (줄바꿈을 <br>로 변환, 리스트 형태로 표시)
        function formatContent(text) {
            return text.replace(/\n/g, '<br>').replace(/•/g, '<strong>•</strong>');
        }

        // 음성 읽기 기능 (개선된 버전)
        function readAloud(testKey) {
            const test = testData[testKey];
            
            // 음성 기능 지원 확인
            if (!('speechSynthesis' in window)) {
                alert('음성 기능을 지원하지 않는 브라우저입니다.\n최신 Chrome, Safari, Edge 브라우저를 사용해 주세요.');
                return;
            }

            // 기존 음성 중지
            speechSynthesis.cancel();

            // 텍스트 정리 (HTML 태그 제거, 특수문자 정리)
            const cleanText = (text) => {
                return text.replace(/•/g, '')
                          .replace(/<br>/g, ' ')
                          .replace(/\n/g, ' ')
                          .replace(/\s+/g, ' ')
                          .trim();
            };

            const textToRead = `
                ${test.title}입니다.
                
                검사 목적을 말씀드리겠습니다. ${cleanText(test.sections.purpose)}
                
                검사 방법입니다. ${cleanText(test.sections.method)}
                
                검사 전 준비사항입니다. ${cleanText(test.sections.preparation)}
                
                주의사항 및 부작용입니다. ${cleanText(test.sections.precautions)}
                
                소요시간은 ${test.sections.duration}입니다.
                
                검사 장소는 ${test.sections.location}입니다.
                
                음성 안내가 끝났습니다.
            `;

            const utterance = new SpeechSynthesisUtterance(textToRead);
            
            // 음성 설정
            utterance.lang = 'ko-KR';
            utterance.rate = 0.7;    // 속도 (0.1-10, 기본값 1)
            utterance.pitch = 1;     // 음높이 (0-2, 기본값 1)
            utterance.volume = 0.9;  // 볼륨 (0-1, 기본값 1)

            // 음성 시작/끝 이벤트 처리
            utterance.onstart = function() {
                console.log('음성 읽기 시작');
                const voiceButtons = document.querySelectorAll('.voice-button');
                voiceButtons.forEach(btn => {
                    btn.innerHTML = '⏹️ 음성 정지';
                    btn.onclick = () => stopSpeaking();
                });
            };

            utterance.onend = function() {
                console.log('음성 읽기 완료');
                resetVoiceButtons();
            };

            utterance.onerror = function(event) {
                console.error('음성 읽기 오류:', event.error);
                alert('음성 읽기 중 오류가 발생했습니다. 다시 시도해 주세요.');
                resetVoiceButtons();
            };

            // 음성 출력 시작
            speechSynthesis.speak(utterance);
        }

        // 음성 중지 기능
        function stopSpeaking() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                resetVoiceButtons();
            }
        }

        // 음성 버튼 상태 초기화
        function resetVoiceButtons() {
            const voiceButtons = document.querySelectorAll('.voice-button');
            voiceButtons.forEach(btn => {
                btn.innerHTML = '🔊 음성으로 듣기';
                btn.onclick = () => {
                    const testTitle = btn.closest('.modal-content').querySelector('.test-title').textContent;
                    // testKey 찾기
                    for (let key in testData) {
                        if (testData[key].title === testTitle) {
                            readAloud(key);
                            break;
                        }
                    }
                };
            });
        }

        // 검색 기능
        function searchTests() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const buttons = testGrid.querySelectorAll('.test-button');
            let hasResults = false;

            buttons.forEach(button => {
                const testKey = button.getAttribute('data-test');
                const test = testData[testKey];
                const searchableText = (test.title + ' ' + test.category + ' ' + Object.values(test.sections).join(' ')).toLowerCase();
                
                if (searchTerm === '' || searchableText.includes(searchTerm)) {
                    button.classList.remove('hidden');
                    hasResults = true;
                } else {
                    button.classList.add('hidden');
                }
            });

            // 검색 결과 없음 메시지 표시
            noResults.style.display = hasResults ? 'none' : 'block';
        }

        // 전체 보기
        function clearSearch() {
            searchInput.value = '';
            const buttons = testGrid.querySelectorAll('.test-button');
            buttons.forEach(button => {
                button.classList.remove('hidden');
            });
            noResults.style.display = 'none';
        }

        // 모달 닫기
        function closeTestModal() {
            testModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            // 음성 읽기 중단
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
        }

        // 이벤트 리스너 등록
        searchButton.addEventListener('click', searchTests);
        clearButton.addEventListener('click', clearSearch);
        closeModal.addEventListener('click', closeTestModal);
        
        // 검색창에서 엔터키 입력 시 검색
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchTests();
            }
        });

        // 실시간 검색 (타이핑할 때마다)
        searchInput.addEventListener('input', searchTests);

        // 모달 배경 클릭 시 닫기
        testModal.addEventListener('click', function(e) {
            if (e.target === testModal) {
                closeTestModal();
            }
        });

        // ESC 키로 모달 닫기
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && testModal.style.display === 'block') {
                closeTestModal();
            }
        });

        // 페이지를 벗어날 때 음성 중지
        window.addEventListener('beforeunload', function() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
        });

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            generateTestButtons();
            searchInput.focus();
        });

        // 전역 함수로 노출 (HTML onclick에서 사용)
        window.showTestDetail = showTestDetail;
        window.readAloud = readAloud;
        window.stopSpeaking = stopSpeaking;
        window.closeTestModal = closeTestModal;

        /*
        ==========================================
        병원 직원을 위한 수정 가이드
        ==========================================
        
        ✅ 현재 총 25개 검사가 모두 포함되어 있습니다:
        
        1. 골수검사 (Bone Marrow Aspiration & Biopsy)
        2. 심전도 (Electrocardiogram, EKG)
        3. 24시간 심전도 검사 (Holter Monitoring)
        4. 심장초음파 (Echocardiography, ECHO)
        5. 운동 부하검사 (Treadmill Test, TMT)
        6. 24시간 활동혈압측정기 (ABPM)
        7. 심장혈관조영술 (Coronary Angiography, CAG)
        8. CT (전산화단층촬영, Computed Tomography)
        9. PFT (폐기능검사, Pulmonary Function Test)
        10. 골밀도 검사 (Bone Mineral Density, BMD)
        11. MRI (자기공명영상, Magnetic Resonance Imaging)
        12. 핵의학과 검사 (Bone Scan)
        13. 연하검사 (VFSS, Video Fluoroscopic Swallowing Study)
        14. EMG/NCV (근전도검사 / 신경전도검사)
        15. EEG (뇌파검사, Electroencephalography)
        16. 복부 초음파 (Abdominal Sonography)
        17. 식도경유심장초음파검사 (TEE)
        18. 간섬유화검사 (Liver Fibroscan)
        19. VCUG (배뇨방광 요도조영검사)
        20. PET-CT (양전자방출단층촬영)
        21. 뇌혈관조영술 (TFCA)
        22. 뇌 단일광자단층촬영 (Brain SPECT)
        23. 상부 위장관 내시경 (EGD)
        24. 하부 위장관 내시경 (Colonoscopy)
        25. 하부 위장관 내시경 (Sigmoidoscopy)

        🔧 검사 정보 수정 방법:
           - testData 객체에서 해당 검사를 찾아 내용을 수정하세요
           - 각 검사는 다음 구조를 따릅니다:
             * category: 검사 카테고리
             * title: 검사 제목
             * sections: 각 섹션별 내용
               - purpose: 검사 목적
               - method: 검사 방법  
               - preparation: 준비사항
               - precautions: 주의사항 및 부작용
               - duration: 소요시간
               - location: 검사 장소

        ➕ 새로운 검사 추가 방법:
           1. testData 객체에 새로운 키를 추가하고 위 구조를 따라 작성
           2. testOrder 배열에 해당 키를 원하는 순서에 추가
           3. 검사명은 영문 또는 한글로 고유하게 설정

        ➖ 검사 삭제 방법:
           1. testData 객체에서 해당 키를 삭제
           2. testOrder 배열에서도 해당 키를 제거

        🎨 디자인 수정:
           - CSS 부분에서 색상, 글꼴 크기 등을 수정 가능
           - 60대 이상 사용자를 고려하여 큰 글씨와 높은 대비를 유지하세요

        📞 연락처 수정:
           - footer 부분의 전화번호를 수정하세요 (현재: 064-740-5000)
           
        🔊 음성 기능:
           - 모든 브라우저에서 작동하지 않을 수 있음
           - Chrome, Safari, Edge에서 가장 안정적
           - 한국어 TTS 지원 여부는 운영체제에 따라 다름
        */
    </script>
</body>
</html>
